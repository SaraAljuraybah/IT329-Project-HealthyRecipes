<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lunchy | Add Recipe</title>
  <link rel="stylesheet" href="DalalStyle.css" />
</head>
<body>

  <!-- ===== START SHARED HTML: HEADER ===== -->
  <header class="site-header">
    <div class="container header-inner">

      <a class="brand" href="index.html">
        <img src="images/logo.png" alt="Lunchy Logo" class="brand-logo" />
        <div class="brand-text">
          <span class="brand-name">Lunchy</span>
          <span class="brand-tagline">Fresh ‚Ä¢ Simple ‚Ä¢ Healthy</span>
        </div>
      </a>

      <nav class="nav">
        <a href="index.html" class="nav-link">Home</a>
        <a href="user.html" class="nav-link">User</a>
        <a href="my-recipes.html" class="nav-link">My Recipes</a>
        <a href="admin.html" class="nav-link">Admin</a>
      </nav>

      <div class="actions">
        <a class="btn btn-ghost" href="login.html">Log In</a>
        <a class="btn btn-primary" href="signup.html">Sign Up</a>
      </div>

    </div>
  </header>
  <!-- ===== END SHARED HTML: HEADER ===== -->

  <main class="container" style="padding: 26px 0 34px;">
    <h1 class="page-title">Add New Recipe</h1>
    <p class="page-subtitle">
      Fill in the recipe details. You can add multiple ingredients and steps.
    </p>

    <form class="form" id="addRecipeForm" novalidate>
      <h2 class="form-title">Recipe Information</h2>

      <div class="form-grid">
        <div class="form-group full">
          <label class="label" for="recipeName">Recipe Name *</label>
          <input class="input" type="text" id="recipeName" name="recipeName" required />
        </div>

        <div class="form-group">
          <label class="label" for="category">Category *</label>
          <select class="select" id="category" name="category" required>
            <option value="">Select a category</option>
            <option value="High Protein">High Protein</option>
            <option value="Low Carb">Low Carb</option>
            <option value="Balanced">Balanced</option>
          </select>
        </div>

        <div class="form-group">
          <label class="label" for="lunchType">Lunch Box Type *</label>
          <select class="select" id="lunchType" name="lunchType" required>
            <option value="">Select a type</option>
            <option value="University">University</option>
            <option value="Work">Work</option>
            <option value="Kids">Kids</option>
            <option value="Snack">Snack</option>
          </select>
        </div>

        <div class="form-group full">
          <label class="label" for="description">Description *</label>
          <textarea class="textarea" id="description" name="description" required
            placeholder="Briefly describe the recipe and why it fits a lunch box..."></textarea>
        </div>

       <div class="form-group full">
  <label class="label">Photo *</label>

  <div class="file-upload file-upload-photo" id="recipePhotoBox">
    <input class="file-input" type="file" id="photo" name="photo" accept="image/*" required hidden />

    <div class="upload-content">
      <span class="upload-icon">üì∑</span>
      <p class="upload-text">
        Upload a meal photo <br>
        <span>Click to browse</span>
      </p>
      <p class="upload-filename" id="recipePhotoName">No file selected</p>
    </div>

    <!-- Optional preview -->
    <div class="photo-preview" id="photoPreview" aria-label="Photo preview" hidden></div>
  </div>

  <div class="helper">Use a clear photo with good lighting.</div>
</div>

      </div>

      <hr style="border: none; border-top: 1px solid var(--border); margin: 18px 0;">

      <h2 class="form-title">Ingredients *</h2>
      <div class="helper">Click ‚ÄúAdd Ingredient‚Äù to add more items.</div>

      <div id="ingredientsContainer" style="margin-top: 12px;">
        <div class="form-group full ingredient-row">
          <label class="label" for="ingredient-1">Ingredient 1</label>
          <input class="input" type="text" id="ingredient-1" name="ingredients[]" required placeholder="e.g., Whole wheat wrap" />
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-soft" id="addIngredientBtn">+ Add Ingredient</button>
        <button type="button" class="btn btn-soft" id="removeIngredientBtn">‚àí Remove Last</button>
      </div>

      <hr style="border: none; border-top: 1px solid var(--border); margin: 18px 0;">

      <h2 class="form-title">Instructions *</h2>
      <div class="helper">Click ‚ÄúAdd Step‚Äù to add more steps.</div>

      <div id="stepsContainer" style="margin-top: 12px;">
        <div class="form-group full step-row">
          <label class="label" for="step-1">Step 1</label>
          <input class="input" type="text" id="step-1" name="steps[]" required placeholder="e.g., Spread the sauce on the wrap" />
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-soft" id="addStepBtn">+ Add Step</button>
        <button type="button" class="btn btn-soft" id="removeStepBtn">‚àí Remove Last</button>
      </div>

      <hr style="border: none; border-top: 1px solid var(--border); margin: 18px 0;">

      <h2 class="form-title">Video / URL (optional)</h2>
      <div class="form-grid">
        <div class="form-group full">
          <label class="label" for="videoUrl">Video Link</label>
          <input class="input" type="url" id="videoUrl" name="videoUrl" placeholder="https://..." />
          <div class="helper">If empty, your recipe will display ‚Äúno video for recipe‚Äù.</div>
        </div>
      </div>

      <div class="form-actions" style="margin-top: 18px;">
        <button type="submit" class="btn btn-primary">Submit Recipe</button>
        <a class="btn btn-ghost" href="my-recipes.html">Back to My Recipes</a>
      </div>
    </form>
  </main>

  <!-- ===== START SHARED HTML: FOOTER ===== -->
  <footer class="site-footer">
    <div class="container footer-inner">
      <p>¬© 2026 Lunchy. All rights reserved.</p>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms & Conditions</a>
      </div>
    </div>
  </footer>
  <!-- ===== END SHARED HTML: FOOTER ===== -->

  <script>
    // Phase 1 requirement: Use JavaScript to dynamically add ingredients and steps.

    let ingredientCount = 1;
    let stepCount = 1;

    const ingredientsContainer = document.getElementById("ingredientsContainer");
    const stepsContainer = document.getElementById("stepsContainer");

    document.getElementById("addIngredientBtn").addEventListener("click", () => {
      ingredientCount++;
      const wrapper = document.createElement("div");
      wrapper.className = "form-group full ingredient-row";
      wrapper.innerHTML = `
        <label class="label" for="ingredient-${ingredientCount}">Ingredient ${ingredientCount}</label>
        <input class="input" type="text" id="ingredient-${ingredientCount}" name="ingredients[]" required
               placeholder="e.g., Lettuce, tomatoes..." />
      `;
      ingredientsContainer.appendChild(wrapper);
    });

    document.getElementById("removeIngredientBtn").addEventListener("click", () => {
      if (ingredientCount <= 1) return;
      ingredientsContainer.lastElementChild.remove();
      ingredientCount--;
    });

    document.getElementById("addStepBtn").addEventListener("click", () => {
      stepCount++;
      const wrapper = document.createElement("div");
      wrapper.className = "form-group full step-row";
      wrapper.innerHTML = `
        <label class="label" for="step-${stepCount}">Step ${stepCount}</label>
        <input class="input" type="text" id="step-${stepCount}" name="steps[]" required
               placeholder="e.g., Pack it in a lunch box container" />
      `;
      stepsContainer.appendChild(wrapper);
    });

    document.getElementById("removeStepBtn").addEventListener("click", () => {
      if (stepCount <= 1) return;
      stepsContainer.lastElementChild.remove();
      stepCount--;
    });

    document.getElementById("addRecipeForm").addEventListener("submit", (e) => {
      e.preventDefault();

      // Quick required check (Phase 1 demo)
      const name = document.getElementById("recipeName").value.trim();
      const category = document.getElementById("category").value;
      const lunchType = document.getElementById("lunchType").value;
      const description = document.getElementById("description").value.trim();

      if (!name || !category || !lunchType || !description) {
        alert("Please fill in all required fields.");
        return;
      }

      alert("Recipe added successfully! (Phase 1 demo)\nRedirecting to My Recipes...");
      window.location.href = "my-recipes.html";
    });

   
  const recipePhotoBox = document.getElementById("recipePhotoBox");
  const recipePhotoInput = document.getElementById("photo");
  const recipePhotoName = document.getElementById("recipePhotoName");
  const photoPreview = document.getElementById("photoPreview");

  recipePhotoBox.addEventListener("click", () => {
    recipePhotoInput.click();
  });

  recipePhotoInput.addEventListener("change", () => {
    if (recipePhotoInput.files.length === 0) return;

    const file = recipePhotoInput.files[0];
    recipePhotoBox.classList.add("active");
    recipePhotoName.textContent = "Selected: " + file.name;

    // Optional preview
    const url = URL.createObjectURL(file);
    photoPreview.style.backgroundImage = `url('${url}')`;
    photoPreview.hidden = false;
  });


  </script>

</body>
</html>

